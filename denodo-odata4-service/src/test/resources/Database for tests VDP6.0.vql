ENTER SINGLE USER MODE;
# ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

# #######################################
# USER CREATION
# #######################################
CREATE OR REPLACE USER odata '3OqPs8HtMsrGCMBOmPFWyFvqjuIqXHhQJX6KSyWJ/qbjDvHFntn3TKhGF4uTrz1cr0T5i7XAFMOf+5PUHErrscFACYsSCvEg'  ENCRYPTED SHA512  'Testing required privileges for OData Service';

# #######################################
# ROLE CREATION
# #######################################

# 0 ====================================================================

# #######################################
# DATABASE
# #######################################
CREATE OR REPLACE DATABASE "日本 OData Tests" '';

CONNECT DATABASE "日本 OData Tests";

# #######################################
# LISTENERS JMS
# #######################################
# No listeners jms
# #######################################
# DATASOURCES
# #######################################
CREATE OR REPLACE DATASOURCE JDBC "mysql_acme_日本"
    DRIVERCLASSNAME = 'com.mysql.jdbc.Driver'
    DATABASEURI = 'jdbc:mysql://avenger.denodotechnologies.denodo.com:3306/acme_crm'
    USERNAME = 'acme_user'
    USERPASSWORD = 'BmWRkuOzoJTeTQCoDNGL0aPvKwBcYwe+' ENCRYPTED
    CLASSPATH = 'C:\Program Files\MySQL\mysql-connector-java-5.1.46\mysql-connector-java-5.1.46.jar'
    DATABASENAME = 'mysql'
    DATABASEVERSION = '5'
    FETCHSIZE = 1000
    BATCHINSERTSIZE = 200
    VALIDATIONQUERY = '/* ping */ SELECT 1'
    INITIALSIZE = 4
    MAXIDLE = -1
    MINIDLE = 0
    MAXACTIVE = 20
    EXHAUSTEDACTION = 1
    TESTONBORROW = true
    TESTONRETURN = false
    TESTWHILEIDLE = false
    TIMEBETWEENEVICTION = -1
    NUMTESTPEREVICTION = 3
    MINEVICTABLETIME = 1800000
    POOLPREPAREDSTATEMENTS = false
    MAXSLEEPINGPS = 4
    INITIALCAPACITYPS = 8;

CHOWN admin DATASOURCE JDBC "mysql_acme_日本" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE DATASOURCE JDBC oracle_avenger
    DRIVERCLASSNAME = 'oracle.jdbc.OracleDriver'
    DATABASEURI = 'jdbc:oracle:thin:@//avenger.denodotechnologies.denodo.com:1521/XE'
    USERNAME = 'denodotestingtool_test'
    USERPASSWORD = '3r/oIp3TOwQ/cgk7P1vZfTm6+VMZuzTELaCfa8Oao/w=' ENCRYPTED
    CLASSPATH = 'oracle-11g'
    DATABASENAME = 'oracle'
    DATABASEVERSION = '11g'
    FETCHSIZE = 1000
    VALIDATIONQUERY = 'SELECT COUNT(*) FROM SYS.DUAL'
    INITIALSIZE = 4
    MAXIDLE = -1
    MINIDLE = 0
    MAXACTIVE = 20
    EXHAUSTEDACTION = 1
    TESTONBORROW = true
    TESTONRETURN = false
    TESTWHILEIDLE = false
    TIMEBETWEENEVICTION = -1
    NUMTESTPEREVICTION = 3
    MINEVICTABLETIME = 1800000
    POOLPREPAREDSTATEMENTS = false
    MAXSLEEPINGPS = 4
    INITIALCAPACITYPS = 8
    PROPERTIES ('includeSynonyms'='false', 'remarksReporting'='false');

CHOWN admin DATASOURCE JDBC oracle_avenger LASTMODIFICATIONUSER admin;

# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE "日本 OData Tests"
  CHARSET UNICODE;

# #######################################
# WRAPPERS
# #######################################
CREATE OR REPLACE WRAPPER JDBC "DATETEST"
    DATASOURCENAME=oracle_avenger
    SCHEMANAME='DENODOTESTINGTOOL_TEST'
    RELATIONNAME='DATETEST'
    OUTPUTSCHEMA (
        "NAME" = 'NAME' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR2', sourcetypeid='12', sourcetypesize='40')  SORTABLE,
        "STARTDATE" = 'STARTDATE' :'java.sql.Timestamp' (OPT) (sourcetyperadix='10', sourcetypename='TIMESTAMP(6)', sourcetypeid='93', sourcetypedecimals='6', sourcetypesize='11')  SORTABLE
    );

CHOWN admin WRAPPER JDBC "DATETEST" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE WRAPPER JDBC "INTERVALTEST"
    DATASOURCENAME=oracle_avenger
    SCHEMANAME='DENODOTESTINGTOOL_TEST'
    RELATIONNAME='INTERVALTEST'
    OUTPUTSCHEMA (
        "INTERVALYM" = 'INTERVALYM' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='INTERVAL YEAR(2) TO MONTH', sourcetypeid='-103', sourcetypedecimals='0', sourcetypesize='2')  NOT SORTABLE,
        "INTERVALDS" = 'INTERVALDS' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='INTERVAL DAY(2) TO SECOND(6)', sourcetypeid='-104', sourcetypedecimals='6', sourcetypesize='2')  NOT SORTABLE
    );

CHOWN admin WRAPPER JDBC "INTERVALTEST" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE WRAPPER JDBC "PHONE_ARRAY_TABLE"
    DATASOURCENAME=oracle_avenger
    SCHEMANAME='DENODOTESTINGTOOL_TEST'
    RELATIONNAME='PHONE_ARRAY_TABLE'
    OUTPUTSCHEMA (
        "NAME" = 'NAME' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR2', sourcetypeid='12', sourcetypesize='20')  SORTABLE,
        "PHONE_NUMBERS" = 'PHONE_NUMBERS': ARRAY OF (
            "DENODOTESTINGTOOL_TEST.PHONE_ARRAY" = 'DENODOTESTINGTOOL_TEST.PHONE_ARRAY' : REGISTER OF (
                value = 'value' :'java.lang.String' (sourcetypename='VARCHAR', sourcetypeid='12')  NOT NULL NOT SORTABLE
            ) NOT SORTABLE NOT UPDATEABLE
        ) NOT SORTABLE NOT UPDATEABLE ISTABLE
    );

CHOWN admin WRAPPER JDBC "PHONE_ARRAY_TABLE" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE WRAPPER JDBC "STRUCT7_TABLE"
    DATASOURCENAME=oracle_avenger
    SCHEMANAME='DENODOTESTINGTOOL_TEST'
    RELATIONNAME='STRUCT7_TABLE'
    OUTPUTSCHEMA (
        id = 'id' :'java.math.BigDecimal' (OPT) (sourcetyperadix='10', sourcetypename='NUMBER', sourcetypeid='3', sourcetypedecimals='0', sourcetypesize='22')  ESCAPE SORTABLE,
        "EMPLOYEE7" = 'EMPLOYEE7' : REGISTER OF (
            "NAME" = 'NAME' :'java.lang.String' (sourcetypename='VARCHAR', sourcetypeid='12')  NOT SORTABLE,
            "SALARY" = 'SALARY' :'java.math.BigDecimal' (sourcetypename='NUMBER', sourcetypeid='2')  NOT SORTABLE,
            "INTERVALYM" = 'INTERVALYM' :'java.lang.String' (sourcetypename='INTERVALYM', sourcetypeid='-103')  NOT SORTABLE,
            "INTERVALDS" = 'INTERVALDS' :'java.lang.String' (sourcetypename='INTERVALDS', sourcetypeid='-104')  NOT SORTABLE,
            "TIMESTAMPCONTZ" = 'TIMESTAMPCONTZ' :'java.sql.Timestamp' (sourcetypename='TIMESTAMP WITH TIME ZONE', sourcetypeid='-101')  NOT SORTABLE,
            "DATEDATE" = 'DATEDATE' :'java.sql.Timestamp' (sourcetypename='DATE', sourcetypeid='91')  NOT SORTABLE,
            "TIMESTAMPTIMESTAMP" = 'TIMESTAMPTIMESTAMP' :'java.sql.Timestamp' (sourcetypename='TIMESTAMP', sourcetypeid='93')  NOT SORTABLE
        ) (sourcetypename='DENODOTESTINGTOOL_TEST.TYPE7_STRUCT', sourcetypeid='1111')  NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER JDBC "STRUCT7_TABLE" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE WRAPPER JDBC "STRUCT_TABLE"
    DATASOURCENAME=oracle_avenger
    SCHEMANAME='DENODOTESTINGTOOL_TEST'
    RELATIONNAME='STRUCT_TABLE'
    OUTPUTSCHEMA (
        "ID" = 'ID' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR2', sourcetypeid='12', sourcetypesize='4')  SORTABLE,
        "EMPLOYEE" = 'EMPLOYEE' : REGISTER OF (
            "NAME" = 'NAME' :'java.lang.String' (sourcetypename='VARCHAR', sourcetypeid='12')  NOT SORTABLE,
            "SALARY" = 'SALARY' :'java.math.BigDecimal' (sourcetypename='NUMBER', sourcetypeid='2')  NOT SORTABLE
        ) (sourcetypename='DENODOTESTINGTOOL_TEST.TYPE_STRUCT', sourcetypeid='1111')  NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER JDBC "STRUCT_TABLE" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE WRAPPER JDBC "STRUCT_TABLE_copy"
    DATASOURCENAME=oracle_avenger
    SCHEMANAME='DENODOTESTINGTOOL_TEST'
    RELATIONNAME='STRUCT_TABLE'
    OUTPUTSCHEMA (
        "ID" = 'ID' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypesize='4', sourcetypeid='12', sourcetypename='VARCHAR2')  NOT NULL SORTABLE,
        "EMPLOYEE" = 'EMPLOYEE' : REGISTER OF (
            "NAME" = 'NAME' :'java.lang.String' (sourcetypeid='12', sourcetypename='VARCHAR')  NOT SORTABLE,
            "SALARY" = 'SALARY' :'java.math.BigDecimal' (sourcetypeid='2', sourcetypename='NUMBER')  NOT SORTABLE
        ) (sourcetypeid='1111', sourcetypename='DENODOTESTINGTOOL_TEST.TYPE_STRUCT')  NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER JDBC "STRUCT_TABLE_copy" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE WRAPPER JDBC "STRUCT_TABLE_copy_0"
    DATASOURCENAME=oracle_avenger
    SCHEMANAME='DENODOTESTINGTOOL_TEST'
    RELATIONNAME='STRUCT_TABLE'
    OUTPUTSCHEMA (
        "ID" = 'ID' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR2', sourcetypeid='12', sourcetypesize='4')  SORTABLE,
        "EMPLOYEE" = 'EMPLOYEE' : REGISTER OF (
            "NAME" = 'NAME' :'java.lang.String' (sourcetypename='VARCHAR', sourcetypeid='12')  NOT SORTABLE,
            "SALARY" = 'SALARY' :'java.math.BigDecimal' (sourcetypename='NUMBER', sourcetypeid='2')  NOT SORTABLE
        ) (sourcetypename='DENODOTESTINGTOOL_TEST.TYPE_STRUCT', sourcetypeid='1111')  NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER JDBC "STRUCT_TABLE_copy_0" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE WRAPPER JDBC address
    DATASOURCENAME="mysql_acme_日本"
    CATALOGNAME='acme_crm'
    RELATIONNAME='address'
    OUTPUTSCHEMA (
        client_identifier = 'client_identifier' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='50')  NOT NULL SORTABLE,
        city = 'city' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='100')  SORTABLE,
        zip = 'zip' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='100')  SORTABLE,
        state = 'state' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='100')  SORTABLE,
        primary_phone = 'primary_phone' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='100')  SORTABLE,
        country = 'country' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='45')  SORTABLE,
        "street日本" = 'street' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='100')  SORTABLE
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'client_identifier' )
    INDEX 'PRIMARY' CLUSTER UNIQUE PRIMARY ( 'client_identifier' );

CHOWN admin WRAPPER JDBC address LASTMODIFICATIONUSER admin;

CREATE OR REPLACE WRAPPER JDBC client
    DATASOURCENAME="mysql_acme_日本"
    CATALOGNAME='acme_crm'
    RELATIONNAME='client'
    OUTPUTSCHEMA (
        client_id = 'client_id' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='50')  NOT NULL SORTABLE,
        name = 'name' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='100')  NOT NULL SORTABLE,
        surname = 'surname' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='100')  NOT NULL SORTABLE,
        client_type = 'client_type' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='2')  NOT NULL SORTABLE,
        company_code = 'company_code' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='50')  NOT NULL SORTABLE,
        ssn = 'ssn' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='45')  SORTABLE
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'client_id' )
    INDEX 'PRIMARY' CLUSTER UNIQUE PRIMARY ( 'client_id' );

CHOWN admin WRAPPER JDBC client LASTMODIFICATIONUSER admin;

CREATE OR REPLACE WRAPPER JDBC date_time_types
    DATASOURCENAME="mysql_acme_日本"
    CATALOGNAME='acme_crm'
    RELATIONNAME='date_time_types'
    OUTPUTSCHEMA (
        date_type = 'date_type' :'java.sql.Date' (OPT) (sourcetyperadix='10', sourcetypename='DATE', sourcetypeid='91', description='', sourcetypesize='10')  SORTABLE,
        datetime_type = 'datetime_type' :'java.sql.Timestamp' (OPT) (sourcetyperadix='10', sourcetypename='DATETIME', sourcetypeid='93', description='', sourcetypesize='19')  SORTABLE,
        timestamp_type = 'timestamp_type' :'java.sql.Timestamp' (OPT) (sourcetyperadix='10', sourcetypename='TIMESTAMP', sourcetypeid='93', description='', sourcetypesize='19')  NOT NULL SORTABLE,
        time_type = 'time_type' :'java.sql.Time' (OPT) (sourcetyperadix='10', sourcetypename='TIME', sourcetypeid='92', description='', sourcetypesize='8')  SORTABLE
    );

CHOWN admin WRAPPER JDBC date_time_types LASTMODIFICATIONUSER admin;

CREATE OR REPLACE WRAPPER JDBC film
    DATASOURCENAME="mysql_acme_日本"
    CATALOGNAME='acme_crm'
    RELATIONNAME='film'
    OUTPUTSCHEMA (
        film_id = 'film_id' :'java.lang.Short' (OPT) (sourcetyperadix='10', sourcetypename='SMALLINT UNSIGNED', sourcetypeid='5', sourcetypedecimals='0', description='', sourcetypesize='5')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        title = 'title' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='VARCHAR', sourcetypeid='12', description='', sourcetypesize='255')  NOT NULL SORTABLE,
        description = 'description' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='TEXT', sourcetypeid='-1', description='', sourcetypesize='65535')  SORTABLE,
        release_year = 'release_year' :'java.sql.Date' (OPT) (sourcetyperadix='10', sourcetypename='YEAR', sourcetypeid='91', description='')  NOT SORTABLE,
        language_id = 'language_id' :'java.lang.Byte' (OPT) (sourcetyperadix='10', sourcetypename='TINYINT UNSIGNED', sourcetypeid='-6', sourcetypedecimals='0', description='', sourcetypesize='3')  NOT NULL NOT SORTABLE,
        original_language_id = 'original_language_id' :'java.lang.Byte' (OPT) (sourcetyperadix='10', sourcetypename='TINYINT UNSIGNED', sourcetypeid='-6', sourcetypedecimals='0', description='', sourcetypesize='3')  NOT SORTABLE,
        rental_duration = 'rental_duration' :'java.lang.Byte' (OPT) (sourcetyperadix='10', sourcetypename='TINYINT UNSIGNED', sourcetypeid='-6', sourcetypedecimals='0', description='', sourcetypesize='3')  NOT NULL NOT SORTABLE,
        rental_rate = 'rental_rate' :'java.math.BigDecimal' (OPT) (sourcetyperadix='10', sourcetypename='DECIMAL', sourcetypeid='3', sourcetypedecimals='2', description='', sourcetypesize='4')  NOT NULL SORTABLE,
        length = 'length' :'java.lang.Short' (OPT) (sourcetyperadix='10', sourcetypename='SMALLINT UNSIGNED', sourcetypeid='5', sourcetypedecimals='0', description='', sourcetypesize='5')  NOT SORTABLE,
        replacement_cost = 'replacement_cost' :'java.math.BigDecimal' (OPT) (sourcetyperadix='10', sourcetypename='DECIMAL', sourcetypeid='3', sourcetypedecimals='2', description='', sourcetypesize='5')  NOT NULL SORTABLE,
        rating = 'rating' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='ENUM', sourcetypeid='1', description='', sourcetypesize='5')  NOT SORTABLE,
        special_features = 'special_features' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypename='SET', sourcetypeid='1', description='', sourcetypesize='54')  NOT SORTABLE,
        last_update = 'last_update' :'java.sql.Timestamp' (OPT) (sourcetyperadix='10', sourcetypename='TIMESTAMP', sourcetypeid='93', description='', sourcetypesize='19')  NOT NULL SORTABLE
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'film_id' )
    INDEX 'PRIMARY' CLUSTER UNIQUE PRIMARY ( 'film_id' )
    INDEX 'idx_fk_language_id' OTHER ( 'language_id' )
    INDEX 'idx_fk_original_language_id' OTHER ( 'original_language_id' )
    INDEX 'idx_title' OTHER ( 'title' );

CHOWN admin WRAPPER JDBC film LASTMODIFICATIONUSER admin;

# #######################################
# STORED PROCEDURES
# #######################################
# No stored procedures
# #######################################
# TYPES
# #######################################
CREATE OR REPLACE TYPE "PHONE_ARRAY_TABLE_PHONE_NUMBERS_DENODOTESTINGTOOL_TEST.PHONE_ARRAY" AS REGISTER OF (value:text (sourcetypeid = '12'));

CREATE OR REPLACE TYPE "STRUCT7_TABLE_EMPLOYEE7" AS REGISTER OF ("NAME":text (sourcetypeid = '12'), "SALARY":decimal (sourcetypeid = '3'), "INTERVALYM":text, "INTERVALDS":text, "TIMESTAMPCONTZ":date (sourcetypeid = '93'), "DATEDATE":date (sourcetypeid = '93'), "TIMESTAMPTIMESTAMP":date (sourcetypeid = '93'));

CREATE OR REPLACE TYPE "STRUCT_TABLE_EMPLOYEE" AS REGISTER OF ("NAME":text (sourcetypeid = '12'), "SALARY":decimal (sourcetypeid = '3'));

CREATE OR REPLACE TYPE "_register_INTERVALDS" AS REGISTER OF ("INTERVALDS":text);

CREATE OR REPLACE TYPE "_register_INTERVALYM_INTERVALDS_id" AS REGISTER OF ("INTERVALYM":text, "INTERVALDS":text, id:int);

CREATE OR REPLACE TYPE _register_city AS REGISTER OF (city:text);

CREATE OR REPLACE TYPE _register_client_id_name_surname_client_type_company_code_ssn AS REGISTER OF (client_id:text, name:text, surname:text, client_type:text, company_code:text, ssn:text);

CREATE OR REPLACE TYPE "_register_client_identifier_street日本_city_zip_state_primary_phone_country" AS REGISTER OF (client_identifier:text, "street日本":text, city:text, zip:text, state:text, primary_phone:text, country:text);

CREATE OR REPLACE TYPE _register_date_type_datetime_type_timestamp_type_time_type_id AS REGISTER OF (date_type:date, datetime_type:date, timestamp_type:date, time_type:date, id:int);

CREATE OR REPLACE TYPE "_register_street日本" AS REGISTER OF ("street日本":text);

CREATE OR REPLACE TYPE "_register_value0_INTERVALDS_case" AS REGISTER OF (value0:int, "INTERVALDS":text, "case":boolean);

CREATE OR REPLACE TYPE "_register_value0_INTERVALYM_INTERVALDS_id_case" AS REGISTER OF (value0:int, "INTERVALYM":text, "INTERVALDS":text, id:int, "case":boolean);

CREATE OR REPLACE TYPE _register_value0_date_type_datetime_type_timestamp_type_time_type_id_case AS REGISTER OF (value0:int, date_type:date, datetime_type:date, timestamp_type:date, time_type:date, id:int, "case":boolean);

CREATE OR REPLACE TYPE "PHONE_ARRAY_TABLE_PHONE_NUMBERS" AS ARRAY OF "PHONE_ARRAY_TABLE_PHONE_NUMBERS_DENODOTESTINGTOOL_TEST.PHONE_ARRAY";

CREATE OR REPLACE TYPE "_array_register_INTERVALDS" AS ARRAY OF "_register_INTERVALDS";

CREATE OR REPLACE TYPE "_array_register_INTERVALYM_INTERVALDS_id" AS ARRAY OF "_register_INTERVALYM_INTERVALDS_id";

CREATE OR REPLACE TYPE _array_register_city AS ARRAY OF _register_city;

CREATE OR REPLACE TYPE _array_register_client_id_name_surname_client_type_company_code_ssn AS ARRAY OF _register_client_id_name_surname_client_type_company_code_ssn;

CREATE OR REPLACE TYPE "_array_register_client_identifier_street日本_city_zip_state_primary_phone_country" AS ARRAY OF "_register_client_identifier_street日本_city_zip_state_primary_phone_country";

CREATE OR REPLACE TYPE _array_register_date_type_datetime_type_timestamp_type_time_type_id AS ARRAY OF _register_date_type_datetime_type_timestamp_type_time_type_id;

CREATE OR REPLACE TYPE "_array_register_street日本" AS ARRAY OF "_register_street日本";

CREATE OR REPLACE TYPE "_array_register_value0_INTERVALDS_case" AS ARRAY OF "_register_value0_INTERVALDS_case";

CREATE OR REPLACE TYPE "_array_register_value0_INTERVALYM_INTERVALDS_id_case" AS ARRAY OF "_register_value0_INTERVALYM_INTERVALDS_id_case";

CREATE OR REPLACE TYPE _array_register_value0_date_type_datetime_type_timestamp_type_time_type_id_case AS ARRAY OF _register_value0_date_type_datetime_type_timestamp_type_time_type_id_case;

CREATE OR REPLACE TYPE "_register_EMPLOYEE" AS REGISTER OF ("EMPLOYEE":"STRUCT_TABLE_EMPLOYEE");

CREATE OR REPLACE TYPE "_register_ID_EMPLOYEE_id_film" AS REGISTER OF ("ID":text, "EMPLOYEE":"STRUCT_TABLE_EMPLOYEE", id_film:int);

CREATE OR REPLACE TYPE "_register_value0_EMPLOYEE_case" AS REGISTER OF (value0:int, "EMPLOYEE":"STRUCT_TABLE_EMPLOYEE", "case":boolean);

CREATE OR REPLACE TYPE "_register_value0_ID_EMPLOYEE_id_film_case" AS REGISTER OF (value0:int, "ID":text, "EMPLOYEE":"STRUCT_TABLE_EMPLOYEE", id_film:int, "case":boolean);

CREATE OR REPLACE TYPE "_array_register_EMPLOYEE" AS ARRAY OF "_register_EMPLOYEE";

CREATE OR REPLACE TYPE "_array_register_ID_EMPLOYEE_id_film" AS ARRAY OF "_register_ID_EMPLOYEE_id_film";

CREATE OR REPLACE TYPE "_array_register_value0_EMPLOYEE_case" AS ARRAY OF "_register_value0_EMPLOYEE_case";

CREATE OR REPLACE TYPE "_array_register_value0_ID_EMPLOYEE_id_film_case" AS ARRAY OF "_register_value0_ID_EMPLOYEE_id_film_case";

CREATE OR REPLACE TYPE "_register_INTERVALYM_INTERVALDS_id_structs" AS REGISTER OF ("INTERVALYM":text, "INTERVALDS":text, id:int, structs:"_array_register_ID_EMPLOYEE_id_film");

CREATE OR REPLACE TYPE "_register_value0_INTERVALYM_INTERVALDS_id_structs_case" AS REGISTER OF (value0:int, "INTERVALYM":text, "INTERVALDS":text, id:int, structs:"_array_register_ID_EMPLOYEE_id_film", "case":boolean);

CREATE OR REPLACE TYPE "_array_register_INTERVALYM_INTERVALDS_id_structs" AS ARRAY OF "_register_INTERVALYM_INTERVALDS_id_structs";

CREATE OR REPLACE TYPE "_array_register_INTERVALYM_INTERVALDS_id_structs_3583" AS ARRAY OF "_register_INTERVALYM_INTERVALDS_id_structs";

CREATE OR REPLACE TYPE "_array_register_value0_INTERVALYM_INTERVALDS_id_structs_case" AS ARRAY OF "_register_value0_INTERVALYM_INTERVALDS_id_structs_case";

# #######################################
# MAPS
# #######################################
# No maps
# #######################################
# BASE VIEWS
# #######################################
CREATE OR REPLACE TABLE "DATETEST" I18N us_pst (
        "NAME":text (sourcetyperadix = '10', sourcetypesize = '40', sourcetypeid = '12'),
        "STARTDATE":date (sourcetyperadix = '10', sourcetypedecimals = '6', sourcetypesize = '11', sourcetypeid = '93')
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD "DATETEST"(
        I18N us_pst
        CONSTRAINTS (
             ADD "NAME" (any) OPT ANY
             ADD "STARTDATE" (any) OPT ANY
        )
        OUTPUTLIST ("NAME", "STARTDATE"
        )
        WRAPPER (jdbc "DATETEST")
    );

CHOWN admin VIEW "DATETEST" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE TABLE "INTERVALTEST" I18N us_pst (
        "INTERVALYM":text,
        "INTERVALDS":text
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD "INTERVALTEST"(
        I18N us_pst
        CONSTRAINTS (
             ADD "INTERVALYM" (any) OPT ANY
             ADD "INTERVALDS" (any) OPT ANY
        )
        OUTPUTLIST ("INTERVALDS", "INTERVALYM"
        )
        WRAPPER (jdbc "INTERVALTEST")
    );

CHOWN admin VIEW "INTERVALTEST" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE TABLE "PHONE_ARRAY_TABLE" I18N us_pst (
        "NAME":text (sourcetyperadix = '10', sourcetypesize = '20', sourcetypeid = '12'),
        "PHONE_NUMBERS":"PHONE_ARRAY_TABLE_PHONE_NUMBERS"
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD "PHONE_ARRAY_TABLE"(
        I18N us_pst
        CONSTRAINTS (
             ADD "NAME" (any) OPT ANY
             ADD "PHONE_NUMBERS" NOS ZERO ()
             ADD "PHONE_NUMBERS" NOS ZERO ()
             ADD "PHONE_NUMBERS".value NOS ZERO ()
        )
        OUTPUTLIST ("NAME", "PHONE_NUMBERS"
        )
        WRAPPER (jdbc "PHONE_ARRAY_TABLE")
    );

CHOWN admin VIEW "PHONE_ARRAY_TABLE" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE TABLE "STRUCT7_TABLE" I18N us_pst (
        id:decimal (sourcetyperadix = '10', sourcetypedecimals = '0', sourcetypesize = '22', sourcetypeid = '3'),
        "EMPLOYEE7":"STRUCT7_TABLE_EMPLOYEE7"
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD "STRUCT7_TABLE"(
        I18N us_pst
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD "EMPLOYEE7" NOS ZERO ()
             ADD "EMPLOYEE7"."NAME" NOS ZERO ()
             ADD "EMPLOYEE7"."SALARY" NOS ZERO ()
             ADD "EMPLOYEE7"."INTERVALYM" NOS ZERO ()
             ADD "EMPLOYEE7"."INTERVALDS" NOS ZERO ()
             ADD "EMPLOYEE7"."TIMESTAMPCONTZ" NOS ZERO ()
             ADD "EMPLOYEE7"."DATEDATE" NOS ZERO ()
             ADD "EMPLOYEE7"."TIMESTAMPTIMESTAMP" NOS ZERO ()
        )
        OUTPUTLIST ("EMPLOYEE7", id
        )
        WRAPPER (jdbc "STRUCT7_TABLE")
    );

CHOWN admin VIEW "STRUCT7_TABLE" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE TABLE "STRUCT_TABLE" I18N us_pst (
        "ID":text (sourcetyperadix = '10', sourcetypesize = '4', sourcetypeid = '12'),
        "EMPLOYEE":"STRUCT_TABLE_EMPLOYEE"
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD "STRUCT_TABLE"(
        I18N us_pst
        CONSTRAINTS (
             ADD "ID" (any) OPT ANY
             ADD "EMPLOYEE" NOS ZERO ()
             ADD "EMPLOYEE"."NAME" NOS ZERO ()
             ADD "EMPLOYEE"."SALARY" NOS ZERO ()
        )
        OUTPUTLIST ("EMPLOYEE", "ID"
        )
        WRAPPER (jdbc "STRUCT_TABLE")
    );

CHOWN admin VIEW "STRUCT_TABLE" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE TABLE "STRUCT_TABLE_copy" I18N us_pst (
        "ID":text (sourcetyperadix = '10', sourcetypesize = '4', sourcetypeid = '12'),
        "EMPLOYEE":"STRUCT_TABLE_EMPLOYEE"
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD "STRUCT_TABLE"(
        I18N us_pst
        CONSTRAINTS (
             ADD "ID" (any) OPT ANY
             ADD "EMPLOYEE" NOS ZERO ()
             ADD "EMPLOYEE"."NAME" NOS ZERO ()
             ADD "EMPLOYEE"."SALARY" NOS ZERO ()
        )
        OUTPUTLIST ("EMPLOYEE", "ID"
        )
        WRAPPER (jdbc "STRUCT_TABLE_copy")
    );

CHOWN admin VIEW "STRUCT_TABLE_copy" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE TABLE "address_日本" I18N us_pst (
        client_identifier:text (sourcetyperadix = '10', description = '', sourcetypesize = '50', sourcetypeid = '12'),
        "street日本":text (sourcetyperadix = '10', description = '', sourcetypesize = '100', sourcetypeid = '12'),
        city:text (sourcetyperadix = '10', description = '', sourcetypesize = '100', sourcetypeid = '12'),
        zip:text (sourcetyperadix = '10', description = '', sourcetypesize = '100', sourcetypeid = '12'),
        state:text (sourcetyperadix = '10', description = '', sourcetypesize = '100', sourcetypeid = '12'),
        primary_phone:text (sourcetyperadix = '10', description = '', sourcetypesize = '100', sourcetypeid = '12'),
        country:text (sourcetyperadix = '10', description = '', sourcetypesize = '45', sourcetypeid = '12')
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'client_identifier' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD address(
        I18N us_pst
        CONSTRAINTS (
             ADD client_identifier (any) OPT ANY
             ADD "street日本" (any) OPT ANY
             ADD city (any) OPT ANY
             ADD zip (any) OPT ANY
             ADD state (any) OPT ANY
             ADD primary_phone (any) OPT ANY
             ADD country (any) OPT ANY
        )
        OUTPUTLIST (city, client_identifier, country, primary_phone, state, "street日本", zip
        )
        WRAPPER (jdbc address)
    );

CHOWN admin VIEW "address_日本" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE TABLE client I18N us_pst (
        client_id:text (sourcetyperadix = '10', description = '', sourcetypesize = '50', sourcetypeid = '12'),
        name:text (sourcetyperadix = '10', description = '', sourcetypesize = '100', sourcetypeid = '12'),
        surname:text (sourcetyperadix = '10', description = '', sourcetypesize = '100', sourcetypeid = '12'),
        client_type:text (sourcetyperadix = '10', description = '', sourcetypesize = '2', sourcetypeid = '12'),
        company_code:text (sourcetyperadix = '10', description = '', sourcetypesize = '50', sourcetypeid = '12'),
        ssn:text (sourcetyperadix = '10', description = '', sourcetypesize = '45', sourcetypeid = '12')
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'client_id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD client(
        I18N us_pst
        CONSTRAINTS (
             ADD client_id (any) OPT ANY
             ADD name (any) OPT ANY
             ADD surname (any) OPT ANY
             ADD client_type (any) OPT ANY
             ADD company_code (any) OPT ANY
             ADD ssn (any) OPT ANY
        )
        OUTPUTLIST (client_id, client_type, company_code, name, ssn, surname
        )
        WRAPPER (jdbc client)
    );

CHOWN admin VIEW client LASTMODIFICATIONUSER admin;

CREATE OR REPLACE TABLE date_time_types I18N us_pst (
        date_type:date (sourcetyperadix = '10', description = '', sourcetypesize = '10', sourcetypeid = '91'),
        datetime_type:date (sourcetyperadix = '10', description = '', sourcetypesize = '19', sourcetypeid = '93'),
        timestamp_type:date (sourcetyperadix = '10', description = '', sourcetypesize = '19', sourcetypeid = '93'),
        time_type:date (sourcetyperadix = '10', description = '', sourcetypesize = '8', sourcetypeid = '92')
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD date_time_types(
        I18N us_pst
        CONSTRAINTS (
             ADD date_type (any) OPT ANY
             ADD datetime_type (any) OPT ANY
             ADD timestamp_type (any) OPT ANY
             ADD time_type (any) OPT ANY
        )
        OUTPUTLIST (date_type, datetime_type, time_type, timestamp_type
        )
        WRAPPER (jdbc date_time_types)
    );

CHOWN admin VIEW date_time_types LASTMODIFICATIONUSER admin;

CREATE OR REPLACE TABLE film I18N us_pst (
        film_id:int (autoincrement, sourcetyperadix = '10', sourcetypedecimals = '0', description = '', sourcetypesize = '5', sourcetypeid = '5'),
        title:text (sourcetyperadix = '10', description = '', sourcetypesize = '255', sourcetypeid = '12'),
        description:text (sourcetyperadix = '10', description = '', sourcetypesize = '65535', sourcetypeid = '-1'),
        release_year:date (sourcetyperadix = '10', description = '', sourcetypeid = '91'),
        language_id:int (sourcetyperadix = '10', sourcetypedecimals = '0', description = '', sourcetypesize = '3', sourcetypeid = '-6'),
        original_language_id:int (sourcetyperadix = '10', sourcetypedecimals = '0', description = '', sourcetypesize = '3', sourcetypeid = '-6'),
        rental_duration:int (sourcetyperadix = '10', sourcetypedecimals = '0', description = '', sourcetypesize = '3', sourcetypeid = '-6'),
        rental_rate:decimal (sourcetyperadix = '10', sourcetypedecimals = '2', description = '', sourcetypesize = '4', sourcetypeid = '3'),
        length:int (sourcetyperadix = '10', sourcetypedecimals = '0', description = '', sourcetypesize = '5', sourcetypeid = '5'),
        replacement_cost:decimal (sourcetyperadix = '10', sourcetypedecimals = '2', description = '', sourcetypesize = '5', sourcetypeid = '3'),
        rating:text (sourcetyperadix = '10', description = '', sourcetypesize = '5', sourcetypeid = '1'),
        special_features:text (sourcetyperadix = '10', description = '', sourcetypesize = '54', sourcetypeid = '1'),
        last_update:date (sourcetyperadix = '10', description = '', sourcetypesize = '19', sourcetypeid = '93')
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'film_id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD film(
        I18N us_pst
        CONSTRAINTS (
             ADD film_id (any) OPT ANY
             ADD title (any) OPT ANY
             ADD description (any) OPT ANY
             ADD release_year (any) OPT ANY
             ADD language_id (any) OPT ANY
             ADD original_language_id (any) OPT ANY
             ADD rental_duration (any) OPT ANY
             ADD rental_rate (any) OPT ANY
             ADD length (any) OPT ANY
             ADD replacement_cost (any) OPT ANY
             ADD rating (any) OPT ANY
             ADD special_features (any) OPT ANY
             ADD last_update (any) OPT ANY
        )
        OUTPUTLIST (description, film_id, language_id, last_update, length, original_language_id, rating, release_year, rental_duration, rental_rate, replacement_cost, special_features, title
        )
        WRAPPER (jdbc film)
    );

CHOWN admin VIEW film LASTMODIFICATIONUSER admin;

# #######################################
# VIEWS
# #######################################
CREATE OR REPLACE VIEW "p_INTERVALTEST" AS SELECT "INTERVALTEST"."INTERVALYM" AS "INTERVALYM", "INTERVALTEST"."INTERVALDS" AS "INTERVALDS", 1 AS id FROM "INTERVALTEST";

CHOWN admin VIEW "p_INTERVALTEST" LASTMODIFICATIONUSER admin;

ALTER VIEW "p_INTERVALTEST"
 LAYOUT ("INTERVALTEST" = [20, 20, 240, 66]);

CREATE OR REPLACE VIEW "p_STRUCT_TABLE" AS SELECT "STRUCT_TABLE"."ID" AS "ID", "STRUCT_TABLE"."EMPLOYEE" AS "EMPLOYEE", 1 AS id_film FROM "STRUCT_TABLE";

CHOWN admin VIEW "p_STRUCT_TABLE" LASTMODIFICATIONUSER admin;

ALTER VIEW "p_STRUCT_TABLE"
 LAYOUT ("STRUCT_TABLE" = [20, 20, 320, 66]);

# #######################################
# ASSOCIATIONS
# #######################################
CREATE OR REPLACE ASSOCIATION "address_日本_client" REFERENTIAL CONSTRAINT
    ENDPOINT "rolename1日本" "address_日本" PRINCIPAL (1)
    ENDPOINT rolename2 client (1)
    ADD MAPPING client_identifier=client_id;

ALTER ASSOCIATION "address_日本_client"
 LAYOUT ("address_日本" = [20, 20, 200, 166], client = [402, 105, 200, 146]);

CHOWN admin ASSOCIATION "address_日本_client" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE ASSOCIATION "film_p_INTERVALTEST" REFERENTIAL CONSTRAINT
    ENDPOINT intervals film PRINCIPAL (1)
    ENDPOINT films "p_INTERVALTEST" (0,*)
    ADD MAPPING film_id=id;

ALTER ASSOCIATION "film_p_INTERVALTEST"
 LAYOUT (film = [20, 20, 200, 225], "p_INTERVALTEST" = [475, 355, 200, 86]);

CHOWN admin ASSOCIATION "film_p_INTERVALTEST" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE ASSOCIATION "film_p_STRUCT_TABLE" REFERENTIAL CONSTRAINT
    ENDPOINT structs film PRINCIPAL (1)
    ENDPOINT films "p_STRUCT_TABLE" (0,*)
    ADD MAPPING film_id=id_film;

ALTER ASSOCIATION "film_p_STRUCT_TABLE"
 LAYOUT (film = [20, 20, 200, 225], "p_STRUCT_TABLE" = [609, 177, 200, 86]);

CHOWN admin ASSOCIATION "film_p_STRUCT_TABLE" LASTMODIFICATIONUSER admin;

CREATE OR REPLACE ASSOCIATION "p_INTERVALTEST_p_STRUCT_TABLE" REFERENTIAL CONSTRAINT
    ENDPOINT structs "p_INTERVALTEST" PRINCIPAL (1)
    ENDPOINT intervals "p_STRUCT_TABLE" (0,*)
    ADD MAPPING id=id_film;

ALTER ASSOCIATION "p_INTERVALTEST_p_STRUCT_TABLE"
 LAYOUT ("p_INTERVALTEST" = [20, 20, 200, 86], "p_STRUCT_TABLE" = [377, 85, 200, 86]);

CHOWN admin ASSOCIATION "p_INTERVALTEST_p_STRUCT_TABLE" LASTMODIFICATIONUSER admin;

# #######################################
# WEBSERVICES
# #######################################
# No web services
# #######################################
# WIDGETS
# #######################################
# No widgets
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS
# #######################################
# No deployed web services
# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS
# #######################################
# No deployed widgets
# #######################################
# USER PRIVILEGES
# #######################################
ALTER USER odata
GRANT ADMIN ON DATABASE;

# #######################################
# ROLE PRIVILEGES
# #######################################
# #######################################
# Closing connection with database 日本 OData Tests
# #######################################
CLOSE;




# ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
EXIT SINGLE USER MODE;
